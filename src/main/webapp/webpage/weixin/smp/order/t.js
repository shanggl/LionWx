<script type="text/javascript">$(function(){$('#smpWeixinOrderList').datagrid({idField: 'id',title: '微信快递订单',url:'smpWeixinOrderController.do?datagrid&field=id,createName,createDate,updateName,updateDate,openId,nackName,senderName,senderPhone,destName,destPhone,destForeignCity,destCityPostcode,destForeignAddr,localOrderNo,packageContent,remark,packageValue,transferType,orderState,bakStat,',fit:true,loadMsg: '数据加载中...',pageSize: 10,pagination:true,pageList:[10,20,30],sortOrder:'asc',rownumbers:true,singleSelect:false,fitColumns:false,showFooter:true,frozenColumns:[[{field:'ck',checkbox:'true'},]],columns:[[{field:'id',title:'主键',width:120,hidden:true,sortable:true},{field:'createName',title:'创建人名称',width:120,hidden:true,sortable:true},{field:'createDate',title:'创建日期',width:120,hidden:true,sortable:true},{field:'updateName',title:'修改人名称',width:120,hidden:true,sortable:true},{field:'updateDate',title:'修改日期',width:120,hidden:true,sortable:true},{field:'openId',title:'用户open_id',width:120,hidden:true,sortable:true},{field:'nackName',title:'微信用户',width:60,sortable:true},{field:'senderName',title:'寄件人名',width:60,sortable:true},{field:'senderPhone',title:'寄件人电话',width:120,sortable:true},{field:'destName',title:'收件人姓名',width:120,sortable:true},{field:'destPhone',title:'收件人电话',width:120,sortable:true},{field:'destForeignCity',title:'国外城市',width:60,sortable:true},{field:'destCityPostcode',title:'国外邮编',width:120,sortable:true},{field:'destForeignAddr',title:'国外地址',width:120,sortable:true},{field:'localOrderNo',title:'国内订单号',width:120,sortable:true},{field:'packageContent',title:'包裹内容',width:256,sortable:true},{field:'remark',title:'备注',width:120,sortable:true},{field:'packageValue',title:'保价CNY',width:120,sortable:true},{field:'transferType',title:'运输类型',width:120,sortable:true,formatter:function(value,rec,index){var valArray = value.split(",");if(valArray.length > 1){var checkboxValue = "";for(var k=0; k<valArray.length; k++){if(valArray[k] == '1'){ checkboxValue = checkboxValue + '特快运输' + ','}if(valArray[k] == '2'){ checkboxValue = checkboxValue + '普快运输' + ','}}return checkboxValue.substring(0,checkboxValue.length-1);}else{if(value=='1'){return '特快运输'}if(value=='2'){return '普快运输'}else{return value}}}},{field:'orderState',title:'订单状态',width:120,sortable:true,formatter:function(value,rec,index){var valArray = value.split(",");if(valArray.length > 1){var checkboxValue = "";for(var k=0; k<valArray.length; k++){if(valArray[k] == '1'){ checkboxValue = checkboxValue + '仓库待收件' + ','}if(valArray[k] == '2'){ checkboxValue = checkboxValue + '已入库待报价' + ','}if(valArray[k] == '3'){ checkboxValue = checkboxValue + '已报价待支付' + ','}if(valArray[k] == '4'){ checkboxValue = checkboxValue + '已支付待出库' + ','}if(valArray[k] == '9'){ checkboxValue = checkboxValue + '存疑问题单' + ','}if(valArray[k] == '8'){ checkboxValue = checkboxValue + '已取消订单' + ','}if(valArray[k] == '7'){ checkboxValue = checkboxValue + '过期取消' + ','}if(valArray[k] == '5'){ checkboxValue = checkboxValue + '已出库运输途中' + ','}if(valArray[k] == '6'){ checkboxValue = checkboxValue + '已签收' + ','}if(valArray[k] == '11'){ checkboxValue = checkboxValue + '原单退回' + ','}if(valArray[k] == '12'){ checkboxValue = checkboxValue + '新单退回' + ','}}return checkboxValue.substring(0,checkboxValue.length-1);}else{if(value=='1'){return '仓库待收件'}if(value=='2'){return '已入库待报价'}if(value=='3'){return '已报价待支付'}if(value=='4'){return '已支付待出库'}if(value=='9'){return '存疑问题单'}if(value=='8'){return '已取消订单'}if(value=='7'){return '过期取消'}if(value=='5'){return '已出库运输途中'}if(value=='6'){return '已签收'}if(value=='11'){return '原单退回'}if(value=='12'){return '新单退回'}else{return value}}}},{field:'bakStat',title:'暂停时原状态',width:120,hidden:true,sortable:true},{field:'opt',title:'操作',width:100,formatter:function(value,rec,index){if(!rec.id){return '';}var href='';if($.inArray(rec.orderState,['1'])>=0){href+="[<a href='#' onclick=confirm('smpWeixinOrderController.do?doPause&id="+rec.id +"','确定将订单置为存疑？','smpWeixinOrderList')> ";href+="存疑</a>]";}if($.inArray(rec.orderState,['9'])>=0){href+="[<a href='#' onclick=confirm('smpWeixinOrderController.do?doNormal&id="+rec.id +"','确定将订单恢复','smpWeixinOrderList')> ";href+="正常</a>]";}return href;}}]],onLoadSuccess:function(data){$("#smpWeixinOrderList").datagrid("clearSelections");},onClickRow:function(rowIndex,rowData){rowid=rowData.id;gridname='smpWeixinOrderList';}});$('#smpWeixinOrderList').datagrid('getPager').pagination({beforePageText:'',afterPageText:'/{pages}',displayMsg:'{from}-{to}共{total}条',showPageList:true,showRefresh:true});$('#smpWeixinOrderList').datagrid('getPager').pagination({onBeforeRefresh:function(pageNumber, pageSize){ $(this).pagination('loading');$(this).pagination('loaded'); }});});function reloadTable(){try{	$('#'+gridname).datagrid('reload');	$('#'+gridname).treegrid('reload');}catch(ex){}}function reloadsmpWeixinOrderList(){$('#smpWeixinOrderList').datagrid('reload');}function getsmpWeixinOrderListSelected(field){return getSelected(field);}function getSelected(field){var row = $('#'+gridname).datagrid('getSelected');if(row!=null){value= row[field];}else{value='';}return value;}function getsmpWeixinOrderListSelections(field){var ids = [];var rows = $('#smpWeixinOrderList').datagrid('getSelections');for(var i=0;i<rows.length;i++){ids.push(rows[i][field]);}ids.join(',');return ids};function getSelectRows(){	return $('#smpWeixinOrderList').datagrid('getChecked');}function smpWeixinOrderListsearch(){var queryParams=$('#smpWeixinOrderList').datagrid('options').queryParams;$('#smpWeixinOrderListtb').find('*').each(function(){queryParams[$(this).attr('name')]=$(this).val();});$('#smpWeixinOrderList').datagrid({url:'smpWeixinOrderController.do?datagrid&field=id,createName,createDate,updateName,updateDate,openId,nackName,senderName,senderPhone,destName,destPhone,destForeignCity,destCityPostcode,destForeignAddr,localOrderNo,packageContent,remark,packageValue,transferType,orderState,bakStat,',pageNumber:1});}function dosearch(params){var jsonparams=$.parseJSON(params);$('#smpWeixinOrderList').datagrid({url:'smpWeixinOrderController.do?datagrid&field=id,createName,createDate,updateName,updateDate,openId,nackName,senderName,senderPhone,destName,destPhone,destForeignCity,destCityPostcode,destForeignAddr,localOrderNo,packageContent,remark,packageValue,transferType,orderState,bakStat,',queryParams:jsonparams});}function smpWeixinOrderListsearchbox(value,name){var queryParams=$('#smpWeixinOrderList').datagrid('options').queryParams;queryParams[name]=value;queryParams.searchfield=name;$('#smpWeixinOrderList').datagrid('reload');}$('#smpWeixinOrderListsearchbox').searchbox({searcher:function(value,name){smpWeixinOrderListsearchbox(value,name);},menu:'#smpWeixinOrderListmm',prompt:'请输入查询关键字'});function EnterPress(e){var e = e || window.event;if(e.keyCode == 13){ smpWeixinOrderListsearch();}}function searchReset(name){ $("#"+name+"tb").find(":input").val("");smpWeixinOrderListsearch();}</script><table width="100%"   id="smpWeixinOrderList" toolbar="#smpWeixinOrderListtb"></table><div id="smpWeixinOrderListtb" style="padding:3px; height: auto"><div name="searchColums"><span style="display:-moz-inline-box;display:inline-block;"><span style="vertical-align:middle;display:-moz-inline-box;display:inline-block;width: 80px;text-align:right;text-overflow:ellipsis;-o-text-overflow:ellipsis; overflow: hidden;white-space:nowrap; " title="微信用户">微信用户：</span><input onkeypress="EnterPress(event)" onkeydown="EnterPress()"  type="text" name="nackName"   style="width: 100px" /></span><span style="display:-moz-inline-box;display:inline-block;"><span style="vertical-align:middle;display:-moz-inline-box;display:inline-block;width: 80px;text-align:right;text-overflow:ellipsis;-o-text-overflow:ellipsis; overflow: hidden;white-space:nowrap; " title="国内订单号">国内订单号：</span><input onkeypress="EnterPress(event)" onkeydown="EnterPress()"  type="text" name="localOrderNo"   style="width: 100px" /></span><span style="display:-moz-inline-box;display:inline-block;"><span style="vertical-align:middle;display:-moz-inline-box;display:inline-block;width: 80px;text-align:right;text-overflow:ellipsis;-o-text-overflow:ellipsis; overflow: hidden;white-space:nowrap; " title="订单状态">订单状态：</span><select name="orderState" WIDTH="100" style="width: 104px"> <option value ="" >---请选择---</option> <option value="1">仓库待收件 </option> <option value="2">已入库待报价 </option> <option value="3">已报价待支付 </option> <option value="4">已支付待出库 </option> <option value="9">存疑问题单 </option> <option value="8">已取消订单 </option> <option value="7">过期取消 </option> <option value="5">已出库运输途中 </option> <option value="6">已签收 </option> <option value="11">原单退回 </option> <option value="12">新单退回 </option></select></span></div><div style="height:30px;" class="datagrid-toolbar"><span style="float:left;" ><a href="#" class="easyui-linkbutton" plain="true" icon="icon-edit" onclick="update('到仓称重','smpCdekOrderController.do?goCreateCdekOrder','smpWeixinOrderList',null,null)">到仓称重</a><a href="#" class="easyui-linkbutton" plain="true" icon="icon-add" onclick="askpay('订单收银','doPayWeixinOrder()','smpWeixinOrderList',null,null)">订单收银</a><a href="#" class="easyui-linkbutton" plain="true" icon="icon-cancel" onclick="rejectPackage('快件退回','smpWeixinOrderController.do?doNormal','smpWeixinOrderList',null,null)">快件退回</a><a href="#" class="easyui-linkbutton" plain="true" icon="icon-search" onclick="detail('查看','smpWeixinOrderController.do?goUpdate','smpWeixinOrderList',null,null)">查看</a><a href="#" class="easyui-linkbutton" plain="true" icon="icon-putout" onclick="ExportXls('导出','null','smpWeixinOrderList',null,null)">导出</a></span><span style="float:right"><a href="#" class="easyui-linkbutton" iconCls="icon-search" onclick="smpWeixinOrderListsearch()">查询</a><a href="#" class="easyui-linkbutton" iconCls="icon-reload" onclick="searchReset('smpWeixinOrderList')">重置</a></span></div>/**
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																					 * 
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																					 */